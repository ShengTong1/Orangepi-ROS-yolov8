<?xml version="1.0"?>
<launch>
    <!-- Astra相机：同时启用RGB和深度 -->
    <arg name="camera_name" default="camera"/>
    
    <group>
        <push-ros-namespace namespace="$(var camera_name)"/>
        <node name="camera" pkg="astra_camera" exec="astra_camera_node" output="screen">
            <param name="camera_name" value="$(var camera_name)"/>
            <param name="serial_number" value=""/>
            <param name="device_num" value="1"/>
            <param name="vendor_id" value="0x2bc5"/>
            <param name="product_id" value=""/>
            
            <!-- UVC RGB配置：启用UVC模式获取RGB -->
            <param name="use_uvc_camera" value="true"/>
            <param name="uvc_vendor_id" value="0x2bc5"/>
            <param name="uvc_product_id" value="0x0511"/>
            <param name="uvc_camera_format" value="yuyv"/>
            <param name="uvc_retry_count" value="100"/>
            
            <!-- 深度流配置 -->
            <param name="depth_width" value="640"/>
            <param name="depth_height" value="400"/>
            <param name="depth_fps" value="30"/>
            <param name="enable_depth" value="true"/>
            <param name="depth_qos" value="default"/>
            
            <!-- RGB颜色流配置 -->
            <param name="color_width" value="640"/>
            <param name="color_height" value="480"/>
            <param name="color_fps" value="30"/>
            <param name="enable_color" value="true"/>  <!-- 启用颜色流 -->
            <param name="color_qos" value="default"/>
            
            <!-- IR流配置（可选，通常与RGB冲突） -->
            <param name="ir_width" value="640"/>
            <param name="ir_height" value="400"/>
            <param name="ir_fps" value="30"/>
            <param name="enable_ir" value="false"/>  <!-- 禁用IR以启用RGB -->
            <param name="ir_qos" value="default"/>
            
            <!-- 同步和深度融合（重要！） -->
            <param name="color_depth_synchronization" value="true"/>  <!-- 同步RGB和深度 -->
            <param name="depth_registration" value="true"/>  <!-- 深度融合 -->
            <param name="enable_point_cloud" value="true"/>
            <param name="enable_colored_point_cloud" value="true"/>  <!-- 彩色点云 -->
            
            <!-- 点云缩放 -->
            <param name="depth_scale" value="1"/>
            
            <!-- TF变换 -->
            <param name="publish_tf" value="true"/>
            <param name="tf_publish_rate" value="10.0"/>
            <param name="camera_link_frame_id" value="camera_link"/>
            <param name="ir_info_url" value=""/>
            <param name="color_info_url" value=""/>
            
            <!-- 日志配置 -->
            <param name="oni_log_level" value="verbose"/>
            <param name="oni_log_to_console" value="false"/>
            <param name="oni_log_to_file" value="false"/>
        </node>
    </group>
</launch>


